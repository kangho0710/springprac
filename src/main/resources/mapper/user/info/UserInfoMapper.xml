<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezen.demo.mapper.UserInfoMapper"> <!-- 적용되는 위치 -->
	<sql id ="userInfoCols"> <!-- 공통부문 -->
	 UI_NUM, UI_ID, UI_NAME, UI_PWD, UI_ZIP, UI_EMAIL, UI_ADDR1, UI_ADDR2, UI_PROFILE, UI_PROFILE_IMG_PATH
	</sql>
	
	<select id="selectUserInfoList" resultType="com.ezen.demo.vo.UserInfoVO"> <!-- id=메서드 명-->
	
		SELECT
		<include refid="userInfoCols"></include>
		FROM USER_INFO
		<where>
			<if test = 'uiName != null and uiName != "" '>
				AND UI_NAME LIKE CONCAT('%',#{uiName},'%')
			</if>
			
			<if test = 'uiId != null and uiId != "" '>
				AND UI_ID LIKE CONCAT('%',#{uiId},'%')
			</if>
			
			<if test = 'uiAddr != null and uiAddr != "" '>
				AND UI_ADDR LIKE CONCAT('%',#{uiAddr},'%')
			</if>
		</where>
	</select>
	
		
	<select id="selectUserInfoById" resultType="com.ezen.demo.vo.UserInfoVO">
		SELECT
		<include refid="userInfoCols"></include>
		FROM USER_INFO
		WHERE UI_ID = #{uiId}
	</select>
	
	<select id="selectUserInfo" resultType = "com.ezen.demo.vo.UserInfoVO">
		SELECT UI_NAME, UI_ID, UI_PWD, UI_EMAIL, UI_ZIP, 
		UI_ADDR1, UI_ADDR2, UI_PROFILE 
		FROM USER_INFO WHERE UI_ID=#{uiId} AND UI_PWD=#{uiPwd}
		<if test = 'uiPwd !=null and uiPwd!=""'>
			
		</if>
	</select>
	
	
	<insert id="insertUserInfo" parameterType="com.ezen.demo.vo.UserInfoVO">
		INSERT INTO USER_INFO(UI_ID, UI_NAME, UI_PWD,  UI_EMAIL, UI_ZIP, UI_ADDR1, UI_ADDR2, UI_PROFILE)
		VALUES(#{uiId}, #{uiName}, #{uiPwd}, #{uiEmail}, #{uiZip}, #{uiAddr1}, #{uiAddr2}, #{uiProfile})
	</insert>
	
</mapper>